{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport \"core-js/modules/esnext.iterator.find.js\";\nimport Swal from 'sweetalert2';\nexport default {\n  name: \"TablaUsuarios\",\n  components: {},\n  data() {\n    return {\n      usuario: {\n        dni: '',\n        alta: '',\n        apellidos: '',\n        nombre: '',\n        direccion: '',\n        email: '',\n        provincia: '',\n        municipio: '',\n        baja: '',\n        telefono: '',\n        tipo: 'usuario'\n      },\n      usuarios: [],\n      provincias: [],\n      municipios: [],\n      errores: [],\n      currentPage: 1,\n      pageSize: 5,\n      isChecked: false,\n      editDni: false\n    };\n  },\n  mounted() {\n    this.getUsuarios();\n    this.getProvincias();\n    this.getMunicipios();\n  },\n  computed: {\n    usuarioPorPagina() {\n      const cleintesFiltrados = this.filtroUsuarios;\n      const indiceInicial = (this.currentPage - 1) * this.pageSize;\n      return cleintesFiltrados.slice(indiceInicial, indiceInicial + this.pageSize);\n    },\n    filtroUsuarios() {\n      if (this.isChecked) {\n        return this.usuarios;\n      } else {\n        return this.usuarios.filter(usuario => !usuario.baja);\n      }\n    },\n    municipiosFiltrados() {\n      if (!this.usuario.provincia || !this.usuario.provincia.id) return [];\n      return this.municipios.filter(municipio => municipio.id.startsWith(this.usuario.provincia.id));\n    }\n  },\n  methods: {\n    async buscarUsuario(dni) {\n      if (!dni) {\n        this.mostrarAlerta('Error', 'Introduce un DNI', 'error');\n      } else {\n        const response = await fetch('http://localhost:3000/usuarios');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud: ' + response.statusText);\n        }\n        const usuarios = await response.json();\n\n        // Encontrar el usuario por su DNI\n        const usuarioEncontrado = usuarios.find(c => c.dni === dni);\n        if (!usuarioEncontrado) {\n          this.mostrarAlerta('Error', 'usuario no existente', 'error');\n        } else {\n          this.seleccionaUsuario(usuarioEncontrado);\n        }\n      }\n    },\n    siguientePagina() {\n      if (this.currentPage * this.pageSize < this.usuarios.length) {\n        this.currentPage++;\n      }\n    },\n    paginaAnterior() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    },\n    async seleccionaUsuario(usuario) {\n      try {\n        this.limpiarFormCli();\n        const response = await fetch('http://localhost:3000/usuarios');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud: ' + response.statusText);\n        }\n        const usuarios = await response.json();\n\n        // Encontrar el usuario por su DNI\n        const usuarioEncontrado = usuarios.find(c => c.dni === usuario.dni);\n        if (usuarioEncontrado) {\n          // Convertir la fecha de alta al formato dd/mm/yyyy\n          // Asignar el objeto completo de provincia y municipio\n          if (this.usuario.provincia) {\n            this.usuario.provincia = this.provincias.find(p => p.nm === this.usuario.provincia).nm;\n            if (this.usuario.provincia) {\n              console.log(\"Provincia encontrada\", this.usuario.provincia);\n            }\n          }\n          this.usuario = {\n            ...usuarioEncontrado\n          };\n          this.editDni = true;\n          console.log(\"usuario encontrado\", this.usuario.municipio);\n          if (this.usuario.alta) {\n            this.usuario.alta = this.usuario.alta.split('T')[0]; // Para asegurarse de que la fecha esté en formato YYYY-MM-DD\n          }\n        } else {\n          this.mostrarAlerta('Error', 'usuario no encontrado en el servidor.', 'error');\n        }\n      } catch (error) {\n        console.error(error);\n        this.mostrarAlerta('Error', 'No se pudo cargar el usuario desde el servidor.', 'error');\n      }\n    },\n    limpiarFormCli() {\n      this.usuario = {\n        dni: '',\n        alta: '',\n        apellidos: '',\n        nombre: '',\n        direccion: '',\n        email: '',\n        provincia: '',\n        municipio: '',\n        baja: ''\n      };\n      this.editDni = false;\n    },\n    validarDNI(dni) {\n      if (dni === '') {\n        // Si el campo está vacío, no hace nada\n        return true;\n      }\n      dni = dni.toUpperCase(); // Convertir a mayúsculas\n      this.usuario.dni = dni;\n      // Comprobar el formato del DNI/NIE\n      const dniRegex = /^[XYZ0-9][0-9]{7}[A-Z]$/; // Formato 8 dígitos seguido de 1 letra\n\n      if (!dniRegex.test(dni)) {\n        this.mostrarAlerta('Error', 'El NIE/DNI con formato no válido.', 'error');\n        return false;\n      }\n\n      // Inicializar variables para el cálculo\n      let dniNum = dni.substring(0, 8); // Extraer los númerhttp://localhost:3000/provinciasos\n      const letra = dni.charAt(8); // Obtener la letra en la posición 8\n      // Identificación del NIE y sustitución\n      if (dniNum.charAt(0) === 'X') {\n        dniNum = dniNum.substring(1, 8);\n        dniNum = '0' + dniNum; // Sustituir X por 0\n      } else if (dniNum.charAt(0) === 'Y') {\n        dniNum = dniNum.substring(1, 8);\n        dniNum = '1' + dniNum; // Sustituir Y por 1\n      } else if (dni.charAt(0) === 'Z') {\n        dniNum = dniNum.substring(1, 8);\n        dniNum = '2' + dniNum; // Sustituir Z por 2\n      }\n\n      // Comprobar la letra esperada\n      const letras = 'TRWAGMYFPDXBNJZSQVHLCKE'; // Letras válidas para el DNI\n      const letraCalculada = letras[dniNum % 23]; // Calcular la letra esperada\n      if (letra !== letraCalculada) {\n        this.mostrarAlerta('Error', 'DNI/NIE Incorrecto.', 'error');\n        return false;\n      }\n      return true; // DNI/NIE válido\n    },\n    validarTelefono(telefono) {\n      if (telefono == '') {\n        this.mostrarAlerta('Error', 'El teléfono con formato no valido', 'error');\n      }\n      const regex = /^[67]\\d{8}$/;\n      if (!regex.test(telefono)) {\n        this.mostrarAlerta('Error', 'El teléfono con formato no valido', 'error');\n      }\n    },\n    async getUsuarios() {\n      try {\n        const response = await fetch('http://localhost:3000/usuarios');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud:' + response.statusText);\n        }\n        this.usuarios = (await response.json()).sort((a, b) => a.apellidos.localeCompare(b.apellidos) || a.nombre.localeCompare(b.nombre));\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async getProvincias() {\n      try {\n        const response = await fetch('http://localhost:3000/provincias');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud:' + response.statusText);\n        }\n        this.provincias = await response.json();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    async getMunicipios() {\n      try {\n        const response = await fetch('http://localhost:3000/municipios');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud:' + response.statusText);\n        }\n        this.municipios = await response.json();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n    mostrarAlerta(titulo, mensaje, icono) {\n      Swal.fire({\n        title: titulo,\n        text: mensaje,\n        icon: icono,\n        customClass: {\n          container: 'custom-alert-container',\n          popup: 'custom-alert-popup',\n          modal: 'custom-alert-modal'\n        }\n      });\n    },\n    obtenerFechaHoy() {\n      const fecha = new Date();\n      const opciones = {\n        day: '2-digit',\n        month: '2-digit',\n        year: 'numeric'\n      };\n      const fechaFormateada = new Intl.DateTimeFormat('es-ES', opciones).format(fecha);\n      //return fecha.toLocaleDateString('es-ES');  // Formato dd/mm/yyyy\n      return fechaFormateada;\n    },\n    async grabarUsuario() {\n      // Verificar si los campos requeridos están llenos\n      if (this.usuario.dni && this.usuario.apellidos && this.usuario.telefono) {\n        try {\n          this.usuario.baja = '';\n          // Obtener los usuarios existentes\n          const response = await fetch('http://localhost:3000/usuarios');\n          if (!response.ok) {\n            throw new Error('Error al obtener los usuarios: ' + response.statusText);\n          }\n          const usuariosExistentes = await response.json();\n          const usuarioExistente = usuariosExistentes.find(usuario => usuario.dni === this.usuario.dni);\n          if (usuarioExistente) {\n            usuarioExistente.baja = '';\n            const actualizarResponse = await fetch(`http://localhost:3000/usuarios/${usuarioExistente.id}`, {\n              method: 'PUT',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(usuarioExistente)\n            });\n            if (!actualizarResponse.ok) {\n              throw new Error('Error al actualizar el usuario: ' + actualizarResponse.statusText);\n            }\n            this.mostrarAlerta('Aviso', 'usuario reactivado correctamente', 'success');\n            this.getUsuarios();\n          } else {\n            const crearResponse = await fetch('http://localhost:3000/usuarios', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(this.usuario)\n            });\n            if (!crearResponse.ok) {\n              throw new Error('Error al guardar el usuario: ' + crearResponse.statusText);\n            }\n            const nuevousuario = await crearResponse.json();\n            this.usuarios.push(nuevousuario);\n            this.mostrarAlerta('Aviso', 'usuario grabado correctamente', 'success');\n            this.getUsuarios();\n          }\n        } catch (error) {\n          console.error(error);\n          this.mostrarAlerta('Error', 'No se pudo grabar el usuario.', 'error');\n        }\n      } else {\n        this.mostrarAlerta('Error', 'Por favor, completa todos los campos requeridos.', 'error');\n      }\n    },\n    async eliminarUsuario() {\n      try {\n        const response = await fetch(\"http://localhost:3000/usuarios\");\n        if (!response.ok) {\n          throw new Error(\"Error en la solicitud: \" + response.statusText);\n        }\n        const usuarios = await response.json();\n        const usuarioExistente = usuarios.find(usuario => usuario.dni === this.usuario.dni);\n        if (usuarioExistente) {\n          const fechaHoy = this.obtenerFechaHoy(); // Llamada a la función correctamente\n\n          usuarioExistente.baja = fechaHoy;\n          await fetch(`http://localhost:3000/usuarios/${usuarioExistente.id}`, {\n            // URL interpolada correctamente\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(usuarioExistente)\n          });\n          this.mostrarAlerta(\"Aviso\", \"usuario dado de baja correctamente\", \"success\");\n          this.getUsuarios(); // Actualizar lista de usuarios\n        } else {\n          this.mostrarAlerta(\"Error\", \"usuario no encontrado\", \"error\");\n        }\n      } catch (error) {\n        console.error(error);\n        this.mostrarAlerta(\"Error\", \"No se pudo dar de baja al usuario\", \"error\");\n      }\n    },\n    async modificarUsuario() {\n      if (this.usuario.dni) {\n        try {\n          const response = await fetch(`http://localhost:3000/usuarios/${this.usuario.id}`, {\n            // URL interpolada correctamente\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify(this.usuario)\n          });\n          if (!response.ok) {\n            throw new Error('Error al modificar el usuario:' + response.statusText);\n          }\n          this.mostrarAlerta(\"Aviso\", \"usuario modificado correctamente\", \"success\");\n          this.getUsuarios();\n        } catch (error) {\n          console.error(error);\n        }\n      } else {\n        this.mostrarAlerta('Error', 'Debe seleccionar un usuario para modificar', 'error');\n      }\n    }\n  }\n};","map":{"version":3,"names":["Swal","name","components","data","usuario","dni","alta","apellidos","nombre","direccion","email","provincia","municipio","baja","telefono","tipo","usuarios","provincias","municipios","errores","currentPage","pageSize","isChecked","editDni","mounted","getUsuarios","getProvincias","getMunicipios","computed","usuarioPorPagina","cleintesFiltrados","filtroUsuarios","indiceInicial","slice","filter","municipiosFiltrados","id","startsWith","methods","buscarUsuario","mostrarAlerta","response","fetch","ok","Error","statusText","json","usuarioEncontrado","find","c","seleccionaUsuario","siguientePagina","length","paginaAnterior","limpiarFormCli","p","nm","console","log","split","error","validarDNI","toUpperCase","dniRegex","test","dniNum","substring","letra","charAt","letras","letraCalculada","validarTelefono","regex","sort","a","b","localeCompare","titulo","mensaje","icono","fire","title","text","icon","customClass","container","popup","modal","obtenerFechaHoy","fecha","Date","opciones","day","month","year","fechaFormateada","Intl","DateTimeFormat","format","grabarUsuario","usuariosExistentes","usuarioExistente","actualizarResponse","method","headers","body","JSON","stringify","crearResponse","nuevousuario","push","eliminarUsuario","fechaHoy","modificarUsuario"],"sources":["/home/a23johanfav/apontejohan/src/components/TablaUsuarios.vue"],"sourcesContent":["<template>\n  <div class=\"row\">\n\n    <h5 class=\"mt-3 text-center front-weight-bold\"><i class=\"bi bi-people\"></i>GESTIÓN USUARIOS</h5>\n  </div>\n  <br>\n  <div class=\"container-fluid border p-4\">\n    <form class=\"form-in-line\">\n      <div class=\"col-10 col-m-6 col-lg-8 mx-auto\">\n        <div class=\"input-group-text mb-3\">\n          <span class=\"input-group-text custom-span me-2\">DNI/NIE:</span>\n          <input type=\"text\" class=\"form-control sm w-25\" placeholder=\"DNI-NIE\" v-model=\"usuario.dni\"\n            @blur=\"validarDNI(this.usuario.dni)\" :disabled=\"editDni\">\n          <button class=\"btn btn-outline\" type=\"submit\" @click.prevent=\"buscarUsuario(usuario.dni)\"> <i\n              class=\"bi bi-search\"></i></button>\n\n          <span class=\"input-group-text custom-span ms-auto me-2\">Fecha Alta:</span>\n          <input type=\"date\" class=\"form-control sm w-25\" placeholder=\"Fecha Alta\" v-model=\"usuario.alta\">\n\n        </div>\n        <div class=\"input-group-text mb-3\">\n          <span class=\"input-group-text custom-span me-2\">Apellidos: </span>\n          <input type=\"text\" class=\"form-control sm w-50\" placeholder=\"Apellidos\" v-model=\"usuario.apellidos\">\n          <span class=\"input-group-text custom-span ms-2 me-2\">Nombre: </span>\n          <input type=\"text\" class=\"form-control sm w-50\" placeholder=\"Nombre\" v-model=\"usuario.nombre\">\n        </div>\n        <div class=\"input-group-text mb-3\">\n          <span class=\"input-group-text custom-span me-2\">Dirección: </span>\n          <input type=\"text\" class=\"form-control sm w-50\" placeholder=\"Dirección\" v-model=\"usuario.direccion\">\n          <span class=\"input-group-text custom-span ms-2 me-2\">Email: </span>\n          <input type=\"email\" class=\"form-control sm w-25\" placeholder=\"Email\" v-model=\"usuario.email\">\n\n          <span class=\"input-group-text custom-span me-2 ms-2\">Teléfono:</span>\n          <input class=\"form-control sm w-25\" type=\"text\" v-model=\"usuario.telefono\"\n            @blur=\"validarTelefono(this.usuario.telefono)\" placeholder=\"Teléfono\">\n        </div>\n\n        <div class=\"input-group-text mb-3\">\n          \n          <span class=\"input-group-text custom-span me-2 \">Provincia: </span>\n          <select name=\"provincia\" class=\"form-control sm \" v-model=\"usuario.provincia\">\n            <option value=\"\">Provincia</option>\n            <option v-for=\"provincia in provincias\" :key=\"provincia.id\" :value=\"provincia\">\n              {{ provincia.nm }}\n            </option>\n          </select>\n          <span class=\"input-group-text custom-span ms-2 me-2\">Municipio: </span>\n          <select name=\"municipio\" class=\"form-control sm w-75\" v-model=\"usuario.municipio\">\n            <option value=\"\">Municipio</option>\n            <option v-for=\"municipio in municipiosFiltrados\" :key=\"municipio.id\" :value=\"municipio\">\n              {{ municipio.nm }}\n            </option>\n          </select>\n\n          <span  class=\"input-group-text custom-span  ms-2 me-2\">Tipo:</span>\n          <select  class=\"form-control sm\" v-model=\"usuario.tipo\" name=\"\" id=\"\">\n            <option  :value=\"usuario\">Usuario</option>\n            <option :value=\"admin\">Administrador</option>\n          </select>\n\n          <input type=\"checkbox\" class=\"m-2\" name=\"historico\" v-model=\"isChecked\">\n          <label for=\"bg input-group-text custom-span ms-2 me-2\">Histórico</label>\n\n          <button class=\"btn btn-light m-1\" @click=\"limpiarFormCli()\">\n            <i class=\"bi-arrow-clockwise\"></i>\n          </button>\n\n        </div>\n      </div>\n      <button class=\"btn btn-primary m-1\" @click.prevent=\"grabarUsuario\">Alta</button>\n      <button class=\"btn btn-primary m-1\" @click.prevent=\"modificarUsuario\">Modificar</button>\n      <button class=\"btn btn-primary m-1\" @click.prevent=\"eliminarUsuario\">Eliminar</button>\n    </form>\n  </div>\n\n\n  <div>\n    <div class=\"container my-5\">\n      <h2 class=\"mb-4\">Lista de Datos</h2>\n      <div class=\"container my-2\">\n        <div class=\"table-responsive\">\n          <table class=\"table table-striped\">\n            <thead class=\"table-info rounded-header\">\n              <tr>\n                <th scope=\"col\" class=\"w-15 text-center\">DNI</th>\n                <th scope=\"col\" class=\"w-20\">Apellidos</th>\n                <th scope=\"col\" class=\"w-20\">Nombre</th>\n                <th scope=\"col\" class=\"w-20 text-center\">Email</th>\n                <th scope=\"col\" class=\"w-10\">Telefono</th>\n                <th scope=\"col\" class=\"w-10\">Tipo</th>\n                <th scope=\"col\" class=\"w-10 text-center\">Fecha Baja</th>\n                <th scope=\"col\" class=\"pale-yellow table-warning\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"usuario in usuarioPorPagina\" :key=\"usuario.id\">\n                <td class=\"align-middle\">{{ usuario.dni }}</td>\n                <td class=\"align-middle text-start\">{{ usuario.apellidos }}</td>\n                <td class=\"align-middle text-start\">{{ usuario.nombre }}</td>\n                <td class=\"align-middle\">{{ usuario.email }}</td>\n                <td class=\"align-middle\">{{ usuario.telefono }}</td>\n                <td class=\"align-middle\">{{ usuario.tipo }}</td>\n                <td class=\"align-middle\">{{ usuario.baja }}</td>\n                <td class=\"text-center align-middle pale-yellow table-warning\">\n                  <div>\n                    <button class=\"btn btn-warning m-2\" @click=\"seleccionaUsuario(usuario)\">\n                      <i class=\"fas fa-pencil-alt\"></i>\n                    </button>\n                    <!--\n                    <button class=\"btn btn-danger m-2\" @click=\"deleteusuario(usuario.dni)\">\n                      <i class=\"bi bi-trash\"></i>\n                    </button>\n                    -->\n                  </div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n\n          <div class=\"d-flex justify-content-center my-3\">\n            <button class=\"btn btn-primary\" :disabled=\"currentPage === 1\" @click=\"paginaAnterior\">\n              <i class=\"bi bi-chevron-left\"> </i>\n            </button>\n            <span class=\"mx-3 align-self-center\">Página {{ currentPage }}</span>\n\n            <button class=\"btn btn-primary\" :disabled=\"currentPage * pageSize >= filtroUsuarios.length\"\n              @click=\"siguientePagina\">\n              <i class=\"bi bi-chevron-right\"></i>\n            </button>\n          </div>\n\n\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Swal from 'sweetalert2';\n\nexport default {\n  name: \"TablaUsuarios\",\n  components: {\n  },\n\n  data() {\n    return {\n\n      usuario: {\n        dni: '',\n        alta: '',\n        apellidos: '',\n        nombre: '',\n        direccion: '',\n        email: '',\n        provincia: '',\n        municipio: '',\n        baja: '',\n        telefono: '',\n        tipo: 'usuario'\n      },\n\n      usuarios: [],\n      provincias: [],\n      municipios: [],\n      errores: [],\n      currentPage: 1,\n      pageSize: 5,\n      isChecked: false,\n      editDni: false\n    };\n  },\n\n  mounted() {\n    this.getUsuarios();\n    this.getProvincias();\n    this.getMunicipios();\n  },\n\n\n  computed: {\n    usuarioPorPagina() {\n      const cleintesFiltrados = this.filtroUsuarios;\n      const indiceInicial = (this.currentPage - 1) * this.pageSize;\n      return cleintesFiltrados.slice(indiceInicial, indiceInicial + this.pageSize)\n    },\n\n    filtroUsuarios() {\n      if (this.isChecked) {\n        return this.usuarios;\n      } else {\n        return this.usuarios.filter(usuario => !usuario.baja);\n      }\n    },\n\n    municipiosFiltrados() {\n      if (!this.usuario.provincia || !this.usuario.provincia.id) return [];\n\n      return this.municipios.filter(municipio =>\n        municipio.id.startsWith(this.usuario.provincia.id)\n      )\n    },\n  },\n\n  methods: {\n    async buscarUsuario(dni) {\n      if (!dni) {\n        this.mostrarAlerta('Error', 'Introduce un DNI', 'error')\n      } else {\n        const response = await fetch('http://localhost:3000/usuarios');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud: ' + response.statusText);\n        }\n        const usuarios = await response.json();\n\n        // Encontrar el usuario por su DNI\n        const usuarioEncontrado = usuarios.find(c => c.dni === dni);\n        if (!usuarioEncontrado) {\n          this.mostrarAlerta('Error', 'usuario no existente', 'error')\n        } else {\n\n          this.seleccionaUsuario(usuarioEncontrado);\n        }\n      }\n\n\n    },\n\n    siguientePagina() {\n      if (this.currentPage * this.pageSize < this.usuarios.length) {\n        this.currentPage++;\n      }\n    },\n\n\n\n    paginaAnterior() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n      }\n    },\n\n    async seleccionaUsuario(usuario) {\n      try {\n        this.limpiarFormCli()\n        const response = await fetch('http://localhost:3000/usuarios');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud: ' + response.statusText);\n        }\n        const usuarios = await response.json();\n\n        // Encontrar el usuario por su DNI\n        const usuarioEncontrado = usuarios.find(c => c.dni === usuario.dni);\n\n\n        if (usuarioEncontrado) {\n          // Convertir la fecha de alta al formato dd/mm/yyyy\n          // Asignar el objeto completo de provincia y municipio\n          if (this.usuario.provincia) {\n            this.usuario.provincia = this.provincias.find(p => p.nm === this.usuario.provincia).nm;\n            if (this.usuario.provincia) {\n              console.log(\"Provincia encontrada\", this.usuario.provincia);\n\n            }\n          }\n\n          this.usuario = { ...usuarioEncontrado };\n          this.editDni = true;\n          console.log(\"usuario encontrado\", this.usuario.municipio);\n          if (this.usuario.alta) {\n            this.usuario.alta = this.usuario.alta.split('T')[0];  // Para asegurarse de que la fecha esté en formato YYYY-MM-DD\n          }\n        } else {\n          this.mostrarAlerta('Error', 'usuario no encontrado en el servidor.', 'error');\n        }\n      } catch (error) {\n        console.error(error);\n        this.mostrarAlerta('Error', 'No se pudo cargar el usuario desde el servidor.', 'error');\n      }\n    },\n\n\n    limpiarFormCli() {\n      this.usuario = {\n        dni: '',\n        alta: '',\n        apellidos: '',\n        nombre: '',\n        direccion: '',\n        email: '',\n        provincia: '',\n        municipio: '',\n        baja: ''\n      }\n\n      this.editDni = false;\n    },\n\n    validarDNI(dni) {\n      if (dni === '') {\n        // Si el campo está vacío, no hace nada\n        return true;\n      }\n      dni = dni.toUpperCase(); // Convertir a mayúsculas\n      this.usuario.dni = dni;\n      // Comprobar el formato del DNI/NIE\n      const dniRegex = /^[XYZ0-9][0-9]{7}[A-Z]$/; // Formato 8 dígitos seguido de 1 letra\n\n      if (!dniRegex.test(dni)) {\n        this.mostrarAlerta('Error', 'El NIE/DNI con formato no válido.', 'error');\n        return false;\n      }\n\n      // Inicializar variables para el cálculo\n      let dniNum = dni.substring(0, 8); // Extraer los númerhttp://localhost:3000/provinciasos\n      const letra = dni.charAt(8); // Obtener la letra en la posición 8\n      // Identificación del NIE y sustitución\n      if (dniNum.charAt(0) === 'X') {\n        dniNum = dniNum.substring(1, 8)\n        dniNum = '0' + dniNum; // Sustituir X por 0\n      } else if (dniNum.charAt(0) === 'Y') {\n        dniNum = dniNum.substring(1, 8)\n        dniNum = '1' + dniNum; // Sustituir Y por 1\n      } else if (dni.charAt(0) === 'Z') {\n        dniNum = dniNum.substring(1, 8)\n        dniNum = '2' + dniNum; // Sustituir Z por 2\n      }\n\n      // Comprobar la letra esperada\n      const letras = 'TRWAGMYFPDXBNJZSQVHLCKE'; // Letras válidas para el DNI\n      const letraCalculada = letras[dniNum % 23]; // Calcular la letra esperada\n      if (letra !== letraCalculada) {\n        this.mostrarAlerta('Error', 'DNI/NIE Incorrecto.', 'error');\n        return false;\n      }\n\n      return true; // DNI/NIE válido\n\n    },\n\n    validarTelefono(telefono) {\n      if (telefono == '') {\n        this.mostrarAlerta('Error', 'El teléfono con formato no valido', 'error');\n      }\n      const regex = /^[67]\\d{8}$/;\n      if (!regex.test(telefono)) {\n        this.mostrarAlerta('Error', 'El teléfono con formato no valido', 'error')\n      }\n    },\n\n    async getUsuarios() {\n      try {\n        const response = await fetch('http://localhost:3000/usuarios');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud:' + response.statusText);\n        }\n        this.usuarios = (await response.json()).sort((a, b) => a.apellidos.localeCompare(b.apellidos) || a.nombre.localeCompare(b.nombre));\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    async getProvincias() {\n      try {\n        const response = await fetch('http://localhost:3000/provincias');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud:' + response.statusText);\n        }\n        this.provincias = await response.json();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    async getMunicipios() {\n      try {\n        const response = await fetch('http://localhost:3000/municipios');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud:' + response.statusText);\n        }\n        this.municipios = await response.json();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    mostrarAlerta(titulo, mensaje, icono) {\n      Swal.fire({\n        title: titulo,\n        text: mensaje,\n        icon: icono,\n        customClass: {\n          container: 'custom-alert-container',\n          popup: 'custom-alert-popup',\n          modal: 'custom-alert-modal'\n        }\n      })\n    },\n    obtenerFechaHoy() {\n      const fecha = new Date();\n      const opciones = { day: '2-digit', month: '2-digit', year: 'numeric' };\n      const fechaFormateada = new Intl.DateTimeFormat('es-ES', opciones).format(fecha);\n      //return fecha.toLocaleDateString('es-ES');  // Formato dd/mm/yyyy\n      return fechaFormateada;\n    },\n\n    async grabarUsuario() {\n      // Verificar si los campos requeridos están llenos\n      if (this.usuario.dni && this.usuario.apellidos && this.usuario.telefono) {\n        try {\n          this.usuario.baja = '';\n          // Obtener los usuarios existentes\n          const response = await fetch('http://localhost:3000/usuarios');\n          if (!response.ok) {\n            throw new Error('Error al obtener los usuarios: ' + response.statusText);\n          }\n\n          const usuariosExistentes = await response.json();\n\n          const usuarioExistente = usuariosExistentes.find(usuario => usuario.dni === this.usuario.dni);\n\n          if (usuarioExistente) {\n\n            usuarioExistente.baja = '';\n            const actualizarResponse = await fetch(`http://localhost:3000/usuarios/${usuarioExistente.id}`, {\n              method: 'PUT',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              body: JSON.stringify(usuarioExistente),\n            });\n\n            if (!actualizarResponse.ok) {\n              throw new Error('Error al actualizar el usuario: ' + actualizarResponse.statusText);\n            }\n\n            this.mostrarAlerta('Aviso', 'usuario reactivado correctamente', 'success');\n            this.getUsuarios();\n          } else {\n            const crearResponse = await fetch('http://localhost:3000/usuarios', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json',\n              },\n              body: JSON.stringify(this.usuario),\n            });\n\n            if (!crearResponse.ok) {\n              throw new Error('Error al guardar el usuario: ' + crearResponse.statusText);\n            }\n\n            const nuevousuario = await crearResponse.json();\n            this.usuarios.push(nuevousuario);\n            this.mostrarAlerta('Aviso', 'usuario grabado correctamente', 'success');\n            this.getUsuarios();\n          }\n        } catch (error) {\n          console.error(error);\n          this.mostrarAlerta('Error', 'No se pudo grabar el usuario.', 'error');\n        }\n      } else {\n        this.mostrarAlerta('Error', 'Por favor, completa todos los campos requeridos.', 'error');\n      }\n    },\n\n    async eliminarUsuario() {\n      try {\n        const response = await fetch(\"http://localhost:3000/usuarios\");\n        if (!response.ok) {\n          throw new Error(\"Error en la solicitud: \" + response.statusText);\n        }\n\n        const usuarios = await response.json();\n        const usuarioExistente = usuarios.find(usuario => usuario.dni === this.usuario.dni);\n\n        if (usuarioExistente) {\n          const fechaHoy = this.obtenerFechaHoy(); // Llamada a la función correctamente\n\n          usuarioExistente.baja = fechaHoy;\n\n          await fetch(`http://localhost:3000/usuarios/${usuarioExistente.id}`, { // URL interpolada correctamente\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(usuarioExistente),\n          });\n\n          this.mostrarAlerta(\"Aviso\", \"usuario dado de baja correctamente\", \"success\");\n          this.getUsuarios(); // Actualizar lista de usuarios\n\n        } else {\n          this.mostrarAlerta(\"Error\", \"usuario no encontrado\", \"error\");\n        }\n      } catch (error) {\n        console.error(error);\n        this.mostrarAlerta(\"Error\", \"No se pudo dar de baja al usuario\", \"error\");\n      }\n    },\n\n    async modificarUsuario() {\n      if (this.usuario.dni) {\n        try {\n\n\n          const response = await fetch(`http://localhost:3000/usuarios/${this.usuario.id}`, { // URL interpolada correctamente\n            method: \"PUT\",\n            headers: {\n              \"Content-Type\": \"application/json\",\n            },\n            body: JSON.stringify(this.usuario),\n          });\n\n\n          if (!response.ok) {\n            throw new Error('Error al modificar el usuario:' + response.statusText);\n          }\n          this.mostrarAlerta(\"Aviso\", \"usuario modificado correctamente\", \"success\");\n          this.getUsuarios();\n\n        } catch (error) {\n          console.error(error);\n        }\n      } else {\n        this.mostrarAlerta('Error', 'Debe seleccionar un usuario para modificar', 'error')\n      }\n    },\n\n\n  },\n}\n\n</script>\n\n<style scoped>\n.custom-date-input {\n  width: 12em;\n  text-align: center;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}