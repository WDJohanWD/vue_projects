{"ast":null,"code":"import \"core-js/modules/esnext.iterator.constructor.js\";\nimport \"core-js/modules/esnext.iterator.filter.js\";\nimport NavBar from './NavBar.vue';\nimport Swal from 'sweetalert2';\nexport default {\n  name: 'TablaClientes',\n  components: {\n    NavBar\n  },\n  data() {\n    return {\n      clientes: [{\n        dni: '0000000H',\n        apellidos: 'Balado Gómez',\n        nombre: 'Juan',\n        email: 'asdf@gasdg.es',\n        baja: ''\n      }, {\n        dni: '0000000H',\n        apellidos: 'Gil Gómez',\n        nombre: 'Alvaro',\n        email: 'asdfasff@fassg.es',\n        baja: ''\n      }, {\n        dni: '0000000H',\n        apellidos: 'Balado Gómez',\n        nombre: 'Maria',\n        email: 'asdf@gasdg.es',\n        baja: '04/11/2024'\n      }],\n      cliente: {\n        dni: '',\n        alta: '',\n        apellidos: '',\n        nombre: '',\n        direccion: '',\n        email: '',\n        provincia: '',\n        municipio: '',\n        baja: ''\n      },\n      errores: [],\n      isChecked: false\n    };\n  },\n  computed: {\n    filtroClientes() {\n      if (this.isChecked) {\n        return this.clientes;\n      } else {\n        return this.clientes.filter(cliente => !cliente.baja);\n      }\n    }\n  },\n  methods: {\n    grabarcliente() {\n      const dni = this.cliente.dni;\n      if (this.validarDNI(dni)) {\n        console.log(\"Prueba grabar cliente\");\n      }\n    },\n    validarDNI(dni) {\n      if (dni === '') {\n        // Si el campo está vacío, no hace nada\n        return true;\n      }\n      dni = dni.toUpperCase(); // Convertir a mayúsculas\n      this.cliente.dni = dni;\n      // Comprobar el formato del DNI/NIE\n      const dniRegex = /^[XYZ0-9][0-9]{7}[A-Z]$/; // Formato 8 dígitos seguido de 1 letra\n\n      if (!dniRegex.test(dni)) {\n        this.mostrarAlerta('Error', 'El NIE/DNI con formato no válido.', 'error');\n        return false;\n      }\n\n      // Inicializar variables para el cálculo\n      let dniNum = dni.substring(0, 8); // Extraer los números\n      const letra = dni.charAt(8); // Obtener la letra en la posición 8\n      // Identificación del NIE y sustitución\n      if (dniNum.charAt(0) === 'X') {\n        dniNum = dniNum.substring(1, 8);\n        dniNum = '0' + dniNum; // Sustituir X por 0\n      } else if (dniNum.charAt(0) === 'Y') {\n        dniNum = dniNum.substring(1, 8);\n        dniNum = '1' + dniNum; // Sustituir Y por 1\n      } else if (dni.charAt(0) === 'Z') {\n        dniNum = dniNum.substring(1, 8);\n        dniNum = '2' + dniNum; // Sustituir Z por 2\n      }\n\n      // Comprobar la letra esperada\n      const letras = 'TRWAGMYFPDXBNJZSQVHLCKE'; // Letras válidas para el DNI\n      const letraCalculada = letras[dniNum % 23]; // Calcular la letra esperada\n      if (letra !== letraCalculada) {\n        this.mostrarAlerta('Error', 'DNI/NIE Incorrecto.', 'error');\n        return false;\n      }\n      return true; // DNI/NIE válido\n    },\n    mostrarAlerta(titulo, mensaje, icono) {\n      Swal.fire({\n        title: titulo,\n        text: mensaje,\n        icon: icono,\n        customClass: {\n          container: 'custom-alert-container',\n          popup: 'custom-alert-popup',\n          modal: 'custom-alert-modal'\n        }\n      });\n    },\n    validarEmail(email) {\n      const emailPattern = /^[a-zA-Z0-9]+([._-]?[a-zA-Z0-9]+)*@[a-zA-Z0-9-]+(\\.[a-zA-Z]{2,})+$/;\n      if (!emailPattern.test(email)) {\n        this.mostrarAlerta('Error', 'Formato correo electrónico no válido', 'error');\n        this.emailError = \"\";\n      } else {\n        return true;\n      }\n    }\n  }\n};","map":{"version":3,"names":["NavBar","Swal","name","components","data","clientes","dni","apellidos","nombre","email","baja","cliente","alta","direccion","provincia","municipio","errores","isChecked","computed","filtroClientes","filter","methods","grabarcliente","validarDNI","console","log","toUpperCase","dniRegex","test","mostrarAlerta","dniNum","substring","letra","charAt","letras","letraCalculada","titulo","mensaje","icono","fire","title","text","icon","customClass","container","popup","modal","validarEmail","emailPattern","emailError"],"sources":["/home/a23johanfav/apontejohan/src/components/TablaClientes.vue"],"sourcesContent":["<template>\n    <div>\n        <NavBar />\n    </div>\n    <div class=\"row\">\n        <h5 class=\"text-center\">GESTIÓN</h5>\n    </div> <br>\n\n    <div class=\"container-fluid border p-4\">\n        <form @submit.prevent=\"grabarcliente\" class=\"form-in-line\">\n            <div class=\"col-10 col-m-6 col-lg-8 mx-auto \">\n                <div class=\"input-group-text mb-3\">\n\n                    <span class=\"input-group-text custom-span me-2\">DNI/NIE</span>\n                    <input type=\"text\" class=\"form-control sm w-25\" placeholder=\"DNI-NIE\" v-model=\"cliente.dni\"\n                        @blur=\"validarDNI(this.cliente.dni)\">\n\n                    <span class=\"input-group-text custom-span ms-auto me-2\">Fecha de alta</span>\n                    <input type=\"date\" class=\"form-control sm w-25\" placeholder=\"Fecha Alta\" v-model=\"cliente.alta\">\n\n                </div>\n\n                <div class=\"input-group-text mb-3\">\n\n                    <span class=\"input-group-text custom-span me-2\">Apellidos</span>\n                    <input type=\"text\" class=\"form-control sm w-50\" placeholder=\"Apellidos\" v-model=\"cliente.apellidos\">\n\n                    <span class=\"input-group-text custom-span ms-auto me-2\">Nombre</span>\n                    <input type=\"text\" class=\"form-control sm w-50\" placeholder=\"Nombre\" v-model=\"cliente.nombre\">\n\n                </div>\n                <div class=\"input-group-text mb-3\">\n\n                    <span class=\"input-group-text custom-span ms-2 me-2\">Dirección</span>\n                    <input type=\"text\" class=\"form-control sm w-75\" placeholder=\"Dirección\" v-model=\"cliente.direccion\">\n                    <span class=\"input-group-text custom-span ms-2 me-2\">Correo</span>\n                    <input type=\"mail\" class=\"form-control sm w-25\" placeholder=\"correo\" v-model=\"cliente.mail\"\n                        @blur=\"validarEmail(this.cliente.mail)\">\n                </div>\n\n                <div class=\"input-group-text mb-3\">\n                    <span class=\"input-group-text custom-span ms-2 me-2\">Provincia</span>\n\n                    <select name=\"provincias\" id=\"provincia\" class=\"form-control sm w-25\">\n                        <option value=\"coruña\">A Coruña</option>\n                        <option value=\"pontevedra\">Pontevedra</option>\n                        <option value=\"lugo\">Lugo</option>\n                        <option value=\"ourense\">Ourense</option>\n                    </select>\n                    <span class=\"bg input-group-text custom-span ms-2 me-2\">Municipio</span>\n\n                    <select name=\"\" id=\"\" class=\"form-control sm w-75\">\n                        <option value=\"madrid\">Madrid</option>\n                        <option value=\"barcelona\">Barcelona</option>\n                    </select>\n\n                    <input type=\"checkbox\" class=\"m-2\" name=\"\" id=\"\">\n                    <label for=\"bg input-group-text custom-span ms-2 me-2\">Historico</label>\n\n                </div>\n            </div>\n            <button class=\"btn btn-primary m-1\">Guardar </button><button class=\"btn btn-primary m-1\">Mostrar\n            </button><button class=\"btn btn-primary m-1\">Eliminar</button>\n        </form>\n        <!-- tabla -->\n        <div class=\"container my-2\">\n            <div class=\"table-responsive\">\n                <table class=\"table table-striped\">\n                    <thead class=\"table-info rounded-header\">\n                        <tr>\n                            <th scope=\"col\" class=\"w-15 text-center\">DNI</th>\n                            <th scope=\"col\" class=\"w-25\">Apellidos</th>\n                            <th scope=\"col\" class=\"w-25\">Nombre</th>\n                            <th scope=\"col\" class=\"w-20 text-center\">Email</th>\n                            <th scope=\"col\" class=\"w-10 text-center\">Fecha Baja</th>\n                            <th scope=\"col\" class=\"pale-yellow\">Acciones</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr v-for=\"cliente in filtroClientes\" :key=\"cliente.id\">\n                            <td class=\"align-middle\">{{ cliente.dni }}</td>\n                            <td class=\"align-middle\">{{ cliente.apellidos }}</td>\n                            <td class=\"align-middle\">{{ cliente.nombre }}</td>\n                            <td class=\"align-middle\">{{ cliente.email }}</td>\n                            <td class=\"align-middle\">{{ cliente.baja }}</td>\n                            <td class=\"text-center align-middle pale-yellow\">\n                                <div>\n                                    <button class=\"btn btn-warning m-2\" @click=\"seleccionaCliente(cliente)\">\n                                        <i class=\"fas fa-pencil-alt\"></i>\n                                    </button>\n                                    <button class=\"btn btn-danger m-2\" @click=\"deleteCliente(cliente.dni)\">\n                                        <i class=\"bi bi-trash\"></i>\n                                    </button>\n                                </div>\n                            </td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n        </div>\n</template>\n\n<script>\nimport NavBar from './NavBar.vue';\nimport Swal from 'sweetalert2';\n\nexport default {\n    name: 'TablaClientes',\n    components: {\n        NavBar\n    },\n\n    data() {\n        return {\n            clientes: [\n                {\n                    dni: '0000000H',\n                    apellidos: 'Balado Gómez',\n                    nombre: 'Juan',\n                    email: 'asdf@gasdg.es',\n                    baja: ''\n                },\n                {\n                    dni: '0000000H',\n                    apellidos: 'Gil Gómez',\n                    nombre: 'Alvaro',\n                    email: 'asdfasff@fassg.es',\n                    baja: ''\n                },\n                {\n                    dni: '0000000H',\n                    apellidos: 'Balado Gómez',\n                    nombre: 'Maria',\n                    email: 'asdf@gasdg.es',\n                    baja: '04/11/2024'\n                },\n            ],\n\n            cliente: {\n                dni: '',\n                alta: '',\n                apellidos: '',\n                nombre: '',\n                direccion: '',\n                email: '',\n                provincia: '',\n                municipio: '',\n                baja: ''\n            },\n            errores: [],\n            isChecked: false\n        };\n    },\n\ncomputed:{\n    filtroClientes(){\n        if(this.isChecked){\n            return this.clientes\n        }else{\n            return this.clientes.filter(cliente => !cliente.baja);\n        }\n    }\n\n},\n\nmethods: {\n    grabarcliente() {\n        const dni = this.cliente.dni;\n        if (this.validarDNI(dni)) {\n            console.log(\"Prueba grabar cliente\")\n        }\n    },\n    validarDNI(dni) {\n        if (dni === '') {\n            // Si el campo está vacío, no hace nada\n            return true;\n        }\n        dni = dni.toUpperCase(); // Convertir a mayúsculas\n        this.cliente.dni = dni;\n        // Comprobar el formato del DNI/NIE\n        const dniRegex = /^[XYZ0-9][0-9]{7}[A-Z]$/; // Formato 8 dígitos seguido de 1 letra\n\n        if (!dniRegex.test(dni)) {\n            this.mostrarAlerta('Error', 'El NIE/DNI con formato no válido.', 'error');\n            return false;\n        }\n\n        // Inicializar variables para el cálculo\n        let dniNum = dni.substring(0, 8); // Extraer los números\n        const letra = dni.charAt(8); // Obtener la letra en la posición 8\n        // Identificación del NIE y sustitución\n        if (dniNum.charAt(0) === 'X') {\n            dniNum = dniNum.substring(1, 8)\n            dniNum = '0' + dniNum; // Sustituir X por 0\n        } else if (dniNum.charAt(0) === 'Y') {\n            dniNum = dniNum.substring(1, 8)\n            dniNum = '1' + dniNum; // Sustituir Y por 1\n        } else if (dni.charAt(0) === 'Z') {\n            dniNum = dniNum.substring(1, 8)\n            dniNum = '2' + dniNum; // Sustituir Z por 2\n        }\n\n        // Comprobar la letra esperada\n        const letras = 'TRWAGMYFPDXBNJZSQVHLCKE'; // Letras válidas para el DNI\n        const letraCalculada = letras[dniNum % 23]; // Calcular la letra esperada\n        if (letra !== letraCalculada) {\n            this.mostrarAlerta('Error', 'DNI/NIE Incorrecto.', 'error');\n            return false;\n        }\n\n        return true; // DNI/NIE válido\n    },\n\n    mostrarAlerta(titulo, mensaje, icono) {\n        Swal.fire({\n            title: titulo,\n            text: mensaje,\n            icon: icono,\n            customClass: {\n                container: 'custom-alert-container',\n                popup: 'custom-alert-popup',\n                modal: 'custom-alert-modal'\n            }\n        });\n\n    },\n    validarEmail(email) {\n        const emailPattern = /^[a-zA-Z0-9]+([._-]?[a-zA-Z0-9]+)*@[a-zA-Z0-9-]+(\\.[a-zA-Z]{2,})+$/;\n        if (!emailPattern.test(email)) {\n            this.mostrarAlerta('Error', 'Formato correo electrónico no válido', 'error');\n            this.emailError = \"\";\n        } else {\n            return true;\n        }\n    },\n},\n\n\n}\n</script>\n\n<style></style>"],"mappings":";;AAwGA,OAAOA,MAAK,MAAO,cAAc;AACjC,OAAOC,IAAG,MAAO,aAAa;AAE9B,eAAe;EACXC,IAAI,EAAE,eAAe;EACrBC,UAAU,EAAE;IACRH;EACJ,CAAC;EAEDI,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,QAAQ,EAAE,CACN;QACIC,GAAG,EAAE,UAAU;QACfC,SAAS,EAAE,cAAc;QACzBC,MAAM,EAAE,MAAM;QACdC,KAAK,EAAE,eAAe;QACtBC,IAAI,EAAE;MACV,CAAC,EACD;QACIJ,GAAG,EAAE,UAAU;QACfC,SAAS,EAAE,WAAW;QACtBC,MAAM,EAAE,QAAQ;QAChBC,KAAK,EAAE,mBAAmB;QAC1BC,IAAI,EAAE;MACV,CAAC,EACD;QACIJ,GAAG,EAAE,UAAU;QACfC,SAAS,EAAE,cAAc;QACzBC,MAAM,EAAE,OAAO;QACfC,KAAK,EAAE,eAAe;QACtBC,IAAI,EAAE;MACV,CAAC,CACJ;MAEDC,OAAO,EAAE;QACLL,GAAG,EAAE,EAAE;QACPM,IAAI,EAAE,EAAE;QACRL,SAAS,EAAE,EAAE;QACbC,MAAM,EAAE,EAAE;QACVK,SAAS,EAAE,EAAE;QACbJ,KAAK,EAAE,EAAE;QACTK,SAAS,EAAE,EAAE;QACbC,SAAS,EAAE,EAAE;QACbL,IAAI,EAAE;MACV,CAAC;MACDM,OAAO,EAAE,EAAE;MACXC,SAAS,EAAE;IACf,CAAC;EACL,CAAC;EAELC,QAAQ,EAAC;IACLC,cAAcA,CAAA,EAAE;MACZ,IAAG,IAAI,CAACF,SAAS,EAAC;QACd,OAAO,IAAI,CAACZ,QAAO;MACvB,CAAC,MAAI;QACD,OAAO,IAAI,CAACA,QAAQ,CAACe,MAAM,CAACT,OAAM,IAAK,CAACA,OAAO,CAACD,IAAI,CAAC;MACzD;IACJ;EAEJ,CAAC;EAEDW,OAAO,EAAE;IACLC,aAAaA,CAAA,EAAG;MACZ,MAAMhB,GAAE,GAAI,IAAI,CAACK,OAAO,CAACL,GAAG;MAC5B,IAAI,IAAI,CAACiB,UAAU,CAACjB,GAAG,CAAC,EAAE;QACtBkB,OAAO,CAACC,GAAG,CAAC,uBAAuB;MACvC;IACJ,CAAC;IACDF,UAAUA,CAACjB,GAAG,EAAE;MACZ,IAAIA,GAAE,KAAM,EAAE,EAAE;QACZ;QACA,OAAO,IAAI;MACf;MACAA,GAAE,GAAIA,GAAG,CAACoB,WAAW,CAAC,CAAC,EAAE;MACzB,IAAI,CAACf,OAAO,CAACL,GAAE,GAAIA,GAAG;MACtB;MACA,MAAMqB,QAAO,GAAI,yBAAyB,EAAE;;MAE5C,IAAI,CAACA,QAAQ,CAACC,IAAI,CAACtB,GAAG,CAAC,EAAE;QACrB,IAAI,CAACuB,aAAa,CAAC,OAAO,EAAE,mCAAmC,EAAE,OAAO,CAAC;QACzE,OAAO,KAAK;MAChB;;MAEA;MACA,IAAIC,MAAK,GAAIxB,GAAG,CAACyB,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE;MAClC,MAAMC,KAAI,GAAI1B,GAAG,CAAC2B,MAAM,CAAC,CAAC,CAAC,EAAE;MAC7B;MACA,IAAIH,MAAM,CAACG,MAAM,CAAC,CAAC,MAAM,GAAG,EAAE;QAC1BH,MAAK,GAAIA,MAAM,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC;QAC9BD,MAAK,GAAI,GAAE,GAAIA,MAAM,EAAE;MAC3B,OAAO,IAAIA,MAAM,CAACG,MAAM,CAAC,CAAC,MAAM,GAAG,EAAE;QACjCH,MAAK,GAAIA,MAAM,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC;QAC9BD,MAAK,GAAI,GAAE,GAAIA,MAAM,EAAE;MAC3B,OAAO,IAAIxB,GAAG,CAAC2B,MAAM,CAAC,CAAC,MAAM,GAAG,EAAE;QAC9BH,MAAK,GAAIA,MAAM,CAACC,SAAS,CAAC,CAAC,EAAE,CAAC;QAC9BD,MAAK,GAAI,GAAE,GAAIA,MAAM,EAAE;MAC3B;;MAEA;MACA,MAAMI,MAAK,GAAI,yBAAyB,EAAE;MAC1C,MAAMC,cAAa,GAAID,MAAM,CAACJ,MAAK,GAAI,EAAE,CAAC,EAAE;MAC5C,IAAIE,KAAI,KAAMG,cAAc,EAAE;QAC1B,IAAI,CAACN,aAAa,CAAC,OAAO,EAAE,qBAAqB,EAAE,OAAO,CAAC;QAC3D,OAAO,KAAK;MAChB;MAEA,OAAO,IAAI,EAAE;IACjB,CAAC;IAEDA,aAAaA,CAACO,MAAM,EAAEC,OAAO,EAAEC,KAAK,EAAE;MAClCrC,IAAI,CAACsC,IAAI,CAAC;QACNC,KAAK,EAAEJ,MAAM;QACbK,IAAI,EAAEJ,OAAO;QACbK,IAAI,EAAEJ,KAAK;QACXK,WAAW,EAAE;UACTC,SAAS,EAAE,wBAAwB;UACnCC,KAAK,EAAE,oBAAoB;UAC3BC,KAAK,EAAE;QACX;MACJ,CAAC,CAAC;IAEN,CAAC;IACDC,YAAYA,CAACtC,KAAK,EAAE;MAChB,MAAMuC,YAAW,GAAI,oEAAoE;MACzF,IAAI,CAACA,YAAY,CAACpB,IAAI,CAACnB,KAAK,CAAC,EAAE;QAC3B,IAAI,CAACoB,aAAa,CAAC,OAAO,EAAE,sCAAsC,EAAE,OAAO,CAAC;QAC5E,IAAI,CAACoB,UAAS,GAAI,EAAE;MACxB,OAAO;QACH,OAAO,IAAI;MACf;IACJ;EACJ;AAGA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}