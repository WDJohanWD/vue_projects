{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelSelect as _vModelSelect, vModelCheckbox as _vModelCheckbox, withModifiers as _withModifiers, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-fluid border p-4\"\n};\nconst _hoisted_2 = {\n  class: \"form-in-line\"\n};\nconst _hoisted_3 = {\n  class: \"col-10 col-m-6 col-lg-8 mx-auto\"\n};\nconst _hoisted_4 = {\n  class: \"input-group-text mb-3\"\n};\nconst _hoisted_5 = [\"disabled\"];\nconst _hoisted_6 = {\n  class: \"input-group-text mb-3\"\n};\nconst _hoisted_7 = {\n  class: \"input-group-text mb-3\"\n};\nconst _hoisted_8 = {\n  class: \"input-group-text mb-3\"\n};\nconst _hoisted_9 = [\"value\"];\nconst _hoisted_10 = [\"value\"];\nconst _hoisted_11 = {\n  class: \"container my-5\"\n};\nconst _hoisted_12 = {\n  class: \"container my-2\"\n};\nconst _hoisted_13 = {\n  class: \"table-responsive\"\n};\nconst _hoisted_14 = {\n  class: \"table table-striped\"\n};\nconst _hoisted_15 = {\n  class: \"align-middle\"\n};\nconst _hoisted_16 = {\n  class: \"align-middle\"\n};\nconst _hoisted_17 = {\n  class: \"align-middle\"\n};\nconst _hoisted_18 = {\n  class: \"align-middle\"\n};\nconst _hoisted_19 = {\n  class: \"align-middle\"\n};\nconst _hoisted_20 = {\n  class: \"text-center align-middle pale-yellow table-warning\"\n};\nconst _hoisted_21 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_NavBar = _resolveComponent(\"NavBar\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_NavBar), _cache[30] || (_cache[30] = _createElementVNode(\"div\", {\n    class: \"row\"\n  }, [_createElementVNode(\"h5\", {\n    class: \"text-center front-weight-bold\"\n  }, \"GESTIÓN CLIENTES\")], -1 /* HOISTED */)), _cache[31] || (_cache[31] = _createElementVNode(\"br\", null, null, -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"form\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_cache[14] || (_cache[14] = _createElementVNode(\"span\", {\n    class: \"input-group-text custom-span me-2\"\n  }, \"DNI/NIE:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control sm w-25\",\n    placeholder: \"DNI-NIE\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.cliente.dni = $event),\n    onBlur: _cache[1] || (_cache[1] = $event => $options.validarDNI(this.cliente.dni)),\n    disabled: $data.editDni\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_5), [[_vModelText, $data.cliente.dni]]), _cache[15] || (_cache[15] = _createElementVNode(\"span\", {\n    class: \"input-group-text custom-span ms-auto me-2\"\n  }, \"Fecha Alta:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"date\",\n    class: \"form-control sm w-25\",\n    placeholder: \"Fecha Alta\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.cliente.alta = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cliente.alta]]), _cache[16] || (_cache[16] = _createElementVNode(\"button\", {\n    class: \"input-group-text custom-span m-2 bg-primary text-light\"\n  }, [_createElementVNode(\"i\", {\n    class: \"bi bi-calendar-week\"\n  })], -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_6, [_cache[17] || (_cache[17] = _createElementVNode(\"span\", {\n    class: \"input-group-text custom-span me-2\"\n  }, \"Apellidos: \", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control sm w-50\",\n    placeholder: \"Apellidos\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.cliente.apellidos = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cliente.apellidos]]), _cache[18] || (_cache[18] = _createElementVNode(\"span\", {\n    class: \"input-group-text custom-span ms-2 me-2\"\n  }, \"Nombre: \", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control sm w-50\",\n    placeholder: \"Nombre\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.cliente.nombre = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cliente.nombre]])]), _createElementVNode(\"div\", _hoisted_7, [_cache[19] || (_cache[19] = _createElementVNode(\"span\", {\n    class: \"input-group-text custom-span me-2\"\n  }, \"Dirección: \", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    class: \"form-control sm w-50\",\n    placeholder: \"Dirección\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.cliente.direccion = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cliente.direccion]]), _cache[20] || (_cache[20] = _createElementVNode(\"span\", {\n    class: \"input-group-text custom-span ms-2 me-2\"\n  }, \"Email: \", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"email\",\n    class: \"form-control sm w-50\",\n    placeholder: \"Email\",\n    \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $data.cliente.email = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.cliente.email]])]), _createElementVNode(\"div\", _hoisted_8, [_cache[24] || (_cache[24] = _createElementVNode(\"span\", {\n    class: \"input-group-text custom-span me-2\"\n  }, \"Provincia: \", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    name: \"provincia\",\n    class: \"form-control sm w-25\",\n    \"onUpdate:modelValue\": _cache[7] || (_cache[7] = $event => $data.cliente.provincia = $event)\n  }, [_cache[21] || (_cache[21] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Provincia\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.provincias, provincia => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: provincia.id,\n      value: provincia\n    }, _toDisplayString(provincia.nm), 9 /* TEXT, PROPS */, _hoisted_9);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.cliente.provincia]]), _cache[25] || (_cache[25] = _createElementVNode(\"span\", {\n    class: \"input-group-text custom-span ms-2 me-2\"\n  }, \"Municipio: \", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"select\", {\n    name: \"municipio\",\n    class: \"form-control sm w-75\",\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $data.cliente.municipio = $event)\n  }, [_cache[22] || (_cache[22] = _createElementVNode(\"option\", {\n    value: \"\"\n  }, \"Municipio\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.municipiosFiltrados, municipio => {\n    return _openBlock(), _createElementBlock(\"option\", {\n      key: municipio.id,\n      value: municipio\n    }, _toDisplayString(municipio.nm), 9 /* TEXT, PROPS */, _hoisted_10);\n  }), 128 /* KEYED_FRAGMENT */))], 512 /* NEED_PATCH */), [[_vModelSelect, $data.cliente.municipio]]), _withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    class: \"m-2\",\n    name: \"historico\",\n    \"onUpdate:modelValue\": _cache[9] || (_cache[9] = $event => $data.isChecked = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $data.isChecked]]), _cache[26] || (_cache[26] = _createElementVNode(\"label\", {\n    for: \"bg input-group-text custom-span ms-2 me-2\"\n  }, \"Histórico\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    class: \"btn btn-light m-1\",\n    onClick: _cache[10] || (_cache[10] = $event => $options.limpiarFormCli())\n  }, _cache[23] || (_cache[23] = [_createElementVNode(\"i\", {\n    class: \"bi-arrow-clockwise\"\n  }, null, -1 /* HOISTED */)]))])]), _createElementVNode(\"button\", {\n    class: \"btn btn-primary m-1\",\n    onClick: _cache[11] || (_cache[11] = _withModifiers((...args) => $options.grabarcliente && $options.grabarcliente(...args), [\"prevent\"]))\n  }, \"Guardar\"), _createElementVNode(\"button\", {\n    class: \"btn btn-primary m-1\",\n    onClick: _cache[12] || (_cache[12] = _withModifiers((...args) => _ctx.mostrarcliente && _ctx.mostrarcliente(...args), [\"prevent\"]))\n  }, \"Mostrar\"), _createElementVNode(\"button\", {\n    class: \"btn btn-primary m-1\",\n    onClick: _cache[13] || (_cache[13] = _withModifiers((...args) => $options.eliminarcliente && $options.eliminarcliente(...args), [\"prevent\"]))\n  }, \"Eliminar\")])]), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_11, [_cache[29] || (_cache[29] = _createElementVNode(\"h2\", {\n    class: \"mb-4\"\n  }, \"Lista de Datos\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_createElementVNode(\"table\", _hoisted_14, [_cache[28] || (_cache[28] = _createElementVNode(\"thead\", {\n    class: \"table-info rounded-header\"\n  }, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", {\n    scope: \"col\",\n    class: \"w-15 text-center\"\n  }, \"DNI\"), _createElementVNode(\"th\", {\n    scope: \"col\",\n    class: \"w-25\"\n  }, \"Apellidos\"), _createElementVNode(\"th\", {\n    scope: \"col\",\n    class: \"w-25\"\n  }, \"Nombre\"), _createElementVNode(\"th\", {\n    scope: \"col\",\n    class: \"w-20 text-center\"\n  }, \"Email\"), _createElementVNode(\"th\", {\n    scope: \"col\",\n    class: \"w-10 text-center\"\n  }, \"Fecha Baja\"), _createElementVNode(\"th\", {\n    scope: \"col\",\n    class: \"pale-yellow table-warning\"\n  }, \"Acciones\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filtroClientes, cliente => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: cliente.id\n    }, [_createElementVNode(\"td\", _hoisted_15, _toDisplayString(cliente.dni), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_16, _toDisplayString(cliente.apellidos), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_17, _toDisplayString(cliente.nombre), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_18, _toDisplayString(cliente.email), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_19, _toDisplayString(cliente.baja), 1 /* TEXT */), _createElementVNode(\"td\", _hoisted_20, [_createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n      class: \"btn btn-warning m-2\",\n      onClick: $event => $options.seleccionaCliente(cliente)\n    }, [...(_cache[27] || (_cache[27] = [_createElementVNode(\"i\", {\n      class: \"fas fa-pencil-alt\"\n    }, null, -1 /* HOISTED */)]))], 8 /* PROPS */, _hoisted_21), _createCommentVNode(\"\\n                    <button class=\\\"btn btn-danger m-2\\\" @click=\\\"deleteCliente(cliente.dni)\\\">\\n                      <i class=\\\"bi bi-trash\\\"></i>\\n                    </button>\\n                    \")])])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementBlock","_Fragment","_createVNode","_component_NavBar","_createElementVNode","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","type","placeholder","_cache","$event","$data","cliente","dni","onBlur","$options","validarDNI","disabled","editDni","_hoisted_5","alta","_hoisted_6","apellidos","nombre","_hoisted_7","direccion","email","_hoisted_8","name","provincia","value","_renderList","provincias","key","id","nm","_hoisted_9","municipio","municipiosFiltrados","_hoisted_10","isChecked","for","onClick","limpiarFormCli","_withModifiers","args","grabarcliente","_ctx","mostrarcliente","eliminarcliente","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","scope","filtroClientes","_hoisted_15","_toDisplayString","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","baja","_hoisted_20","seleccionaCliente","_hoisted_21","_createCommentVNode"],"sources":["/home/a23johanfav/apontejohan/src/components/TablaClientes.vue"],"sourcesContent":["<template>\n  <NavBar />\n  <div class=\"row\">\n    <h5 class=\"text-center front-weight-bold\">GESTIÓN CLIENTES</h5>\n  </div>\n  <br>\n  <div class=\"container-fluid border p-4\">\n    <form class=\"form-in-line\">\n      <div class=\"col-10 col-m-6 col-lg-8 mx-auto\">\n        <div class=\"input-group-text mb-3\">\n          <span class=\"input-group-text custom-span me-2\">DNI/NIE:</span>\n          <input type=\"text\" class=\"form-control sm w-25\" placeholder=\"DNI-NIE\" v-model=\"cliente.dni\"\n            @blur=\"validarDNI(this.cliente.dni)\" :disabled=\"editDni\">\n\n          <span class=\"input-group-text custom-span ms-auto me-2\">Fecha Alta:</span>\n          <input type=\"date\" class=\"form-control sm w-25\" placeholder=\"Fecha Alta\" v-model=\"cliente.alta\">\n          <button class=\"input-group-text custom-span m-2 bg-primary text-light\"><i\n              class=\"bi bi-calendar-week\"></i></button>\n        </div>\n        <div class=\"input-group-text mb-3\">\n          <span class=\"input-group-text custom-span me-2\">Apellidos: </span>\n          <input type=\"text\" class=\"form-control sm w-50\" placeholder=\"Apellidos\" v-model=\"cliente.apellidos\">\n          <span class=\"input-group-text custom-span ms-2 me-2\">Nombre: </span>\n          <input type=\"text\" class=\"form-control sm w-50\" placeholder=\"Nombre\" v-model=\"cliente.nombre\">\n        </div>\n        <div class=\"input-group-text mb-3\">\n          <span class=\"input-group-text custom-span me-2\">Dirección: </span>\n          <input type=\"text\" class=\"form-control sm w-50\" placeholder=\"Dirección\" v-model=\"cliente.direccion\">\n          <span class=\"input-group-text custom-span ms-2 me-2\">Email: </span>\n          <input type=\"email\" class=\"form-control sm w-50\" placeholder=\"Email\" v-model=\"cliente.email\">\n        </div>\n\n        <div class=\"input-group-text mb-3\">\n          <span class=\"input-group-text custom-span me-2\">Provincia: </span>\n          <select name=\"provincia\" class=\"form-control sm w-25\" v-model=\"cliente.provincia\">\n            <option value=\"\">Provincia</option>\n            <option v-for=\"provincia in provincias\" :key=\"provincia.id\" :value=\"provincia\">\n              {{ provincia.nm }}\n            </option>\n          </select>\n          <span class=\"input-group-text custom-span ms-2 me-2\">Municipio: </span>\n          <select name=\"municipio\" class=\"form-control sm w-75\" v-model=\"cliente.municipio\">\n            <option value=\"\">Municipio</option>\n            <option v-for=\"municipio in municipiosFiltrados\" :key=\"municipio.id\" :value=\"municipio\">\n              {{ municipio.nm }}\n            </option>\n          </select>\n\n          <input type=\"checkbox\" class=\"m-2\" name=\"historico\" v-model=\"isChecked\">\n          <label for=\"bg input-group-text custom-span ms-2 me-2\">Histórico</label>\n\n          <button class=\"btn btn-light m-1\" @click=\"limpiarFormCli()\">\n            <i class=\"bi-arrow-clockwise\"></i>\n          </button>\n\n        </div>\n      </div>\n      <button class=\"btn btn-primary m-1\" @click.prevent=\"grabarcliente\">Guardar</button>\n      <button class=\"btn btn-primary m-1\" @click.prevent=\"mostrarcliente\">Mostrar</button>\n      <button class=\"btn btn-primary m-1\" @click.prevent=\"eliminarcliente\">Eliminar</button>\n    </form>\n  </div>\n\n\n  <div>\n    <div class=\"container my-5\">\n      <h2 class=\"mb-4\">Lista de Datos</h2>\n      <div class=\"container my-2\">\n        <div class=\"table-responsive\">\n          <table class=\"table table-striped\">\n            <thead class=\"table-info rounded-header\">\n              <tr>\n                <th scope=\"col\" class=\"w-15 text-center\">DNI</th>\n                <th scope=\"col\" class=\"w-25\">Apellidos</th>\n                <th scope=\"col\" class=\"w-25\">Nombre</th>\n                <th scope=\"col\" class=\"w-20 text-center\">Email</th>\n                <th scope=\"col\" class=\"w-10 text-center\">Fecha Baja</th>\n                <th scope=\"col\" class=\"pale-yellow table-warning\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"cliente in filtroClientes\" :key=\"cliente.id\">\n                <td class=\"align-middle\">{{ cliente.dni }}</td>\n                <td class=\"align-middle\">{{ cliente.apellidos }}</td>\n                <td class=\"align-middle\">{{ cliente.nombre }}</td>\n                <td class=\"align-middle\">{{ cliente.email }}</td>\n                <td class=\"align-middle\">{{ cliente.baja }}</td>\n                <td class=\"text-center align-middle pale-yellow table-warning\">\n                  <div>\n                    <button class=\"btn btn-warning m-2\" @click=\"seleccionaCliente(cliente)\">\n                      <i class=\"fas fa-pencil-alt\"></i>\n                    </button>\n                    <!--\n                    <button class=\"btn btn-danger m-2\" @click=\"deleteCliente(cliente.dni)\">\n                      <i class=\"bi bi-trash\"></i>\n                    </button>\n                    -->\n                  </div>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavBar from './NavBar.vue';\nimport Swal from 'sweetalert2';\n\nexport default {\n  name: \"TablaClientes\",\n  components: {\n    NavBar\n  },\n\n  data() {\n    return {\n\n      cliente: {\n        dni: '',\n        alta: '',\n        apellidos: '',\n        nombre: '',\n        direccion: '',\n        email: '',\n        provincia: '',\n        municipio: '',\n        baja: ''\n      },\n\n      clientes: [],\n      provincias: [],\n      municipios: [],\n      errores: [],\n      isChecked: false,\n      editDni: false\n    };\n  },\n\n  mounted() {\n    this.getClientes();\n    this.getProvincias();\n    this.getMunicipios();\n  },\n\n\n  computed: {\n    filtroClientes() {\n      if (this.isChecked) {\n        return this.clientes;\n      } else {\n        return this.clientes.filter(cliente => !cliente.baja);\n      }\n    },\n\n    municipiosFiltrados() {\n      if (!this.cliente.provincia || !this.cliente.provincia.id) return [];\n\n      return this.municipios.filter(municipio =>\n        municipio.id.startsWith(this.cliente.provincia.id)\n      )\n    },\n  },\n\n  methods: {\n    async seleccionaCliente(cliente) {\n      try {\n        this.limpiarFormCli()\n        const response = await fetch('http://localhost:3000/clientes');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud: ' + response.statusText);\n        }\n        const clientes = await response.json();\n\n        // Encontrar el cliente por su DNI\n        const clienteEncontrado = clientes.find(c => c.dni === cliente.dni);\n\n\n        if (clienteEncontrado) {\n          // Convertir la fecha de alta al formato dd/mm/yyyy\n          // Asignar el objeto completo de provincia y municipio\n          if (this.cliente.provincia) {\n            this.cliente.provincia = this.provincias.find(p => p.nm === this.cliente.provincia).nm;\n            if (this.cliente.provincia) {\n              console.log(\"Provincia encontrada\", this.cliente.provincia);\n\n            }\n          }\n\n          this.cliente = { ...clienteEncontrado };\n          this.editDni = true;\n          console.log(\"Cliente encontrado\", this.cliente.municipio);\n          if (this.cliente.alta) {\n            this.cliente.alta = this.cliente.alta.split('T')[0];  // Para asegurarse de que la fecha esté en formato YYYY-MM-DD\n          }\n        } else {\n          this.mostrarAlerta('Error', 'Cliente no encontrado en el servidor.', 'error');\n        }\n      } catch (error) {\n        console.error(error);\n        this.mostrarAlerta('Error', 'No se pudo cargar el cliente desde el servidor.', 'error');\n      }\n    },\n\n\n    limpiarFormCli() {\n      this.cliente = {\n        dni: '',\n        alta: '',\n        apellidos: '',\n        nombre: '',\n        direccion: '',\n        email: '',\n        provincia: '',\n        municipio: '',\n        baja: ''\n      }\n\n      this.editDni = false;\n    },\n\n    validarDNI(dni) {\n      if (dni === '') {\n        // Si el campo está vacío, no hace nada\n        return true;\n      }\n      dni = dni.toUpperCase(); // Convertir a mayúsculas\n      this.cliente.dni = dni;\n      // Comprobar el formato del DNI/NIE\n      const dniRegex = /^[XYZ0-9][0-9]{7}[A-Z]$/; // Formato 8 dígitos seguido de 1 letra\n\n      if (!dniRegex.test(dni)) {\n        this.mostrarAlerta('Error', 'El NIE/DNI con formato no válido.', 'error');\n        return false;\n      }\n\n      // Inicializar variables para el cálculo\n      let dniNum = dni.substring(0, 8); // Extraer los númerhttp://localhost:3000/provinciasos\n      const letra = dni.charAt(8); // Obtener la letra en la posición 8\n      // Identificación del NIE y sustitución\n      if (dniNum.charAt(0) === 'X') {\n        dniNum = dniNum.substring(1, 8)\n        dniNum = '0' + dniNum; // Sustituir X por 0\n      } else if (dniNum.charAt(0) === 'Y') {\n        dniNum = dniNum.substring(1, 8)\n        dniNum = '1' + dniNum; // Sustituir Y por 1\n      } else if (dni.charAt(0) === 'Z') {\n        dniNum = dniNum.substring(1, 8)\n        dniNum = '2' + dniNum; // Sustituir Z por 2\n      }\n\n      // Comprobar la letra esperada\n      const letras = 'TRWAGMYFPDXBNJZSQVHLCKE'; // Letras válidas para el DNI\n      const letraCalculada = letras[dniNum % 23]; // Calcular la letra esperada\n      if (letra !== letraCalculada) {\n        this.mostrarAlerta('Error', 'DNI/NIE Incorrecto.', 'error');\n        return false;\n      }\n\n      return true; // DNI/NIE válido\n\n    },\n\n    async getClientes() {\n      try {\n        const response = await fetch('http://localhost:3000/clientes');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud:' + response.statusText);\n        }\n        this.clientes = (await response.json()).sort((a, b) => a.apellidos.localeCompare(b.apellidos) || a.nombre.localeCompare(b.nombre));\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    async getProvincias() {\n      try {\n        const response = await fetch('http://localhost:3000/provincias');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud:' + response.statusText);\n        }\n        this.provincias = await response.json();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    async getMunicipios() {\n      try {\n        const response = await fetch('http://localhost:3000/municipios');\n        if (!response.ok) {\n          throw new Error('Error en la solicitud:' + response.statusText);\n        }\n        this.municipios = await response.json();\n      } catch (error) {\n        console.error(error);\n      }\n    },\n\n    mostrarAlerta(titulo, mensaje, icono) {\n      Swal.fire({\n        title: titulo,\n        text: mensaje,\n        icon: icono,\n        customClass: {\n          container: 'custom-alert-container',\n          popup: 'custom-alert-popup',\n          modal: 'custom-alert-modal'\n        }\n      })\n    },\n\n    async grabarcliente() {\n      // Verificar si los campos requeridos están llenos\n      if (this.cliente.dni && this.cliente.apellidos) {\n        try {\n          this.cliente.baja = ''\n          // Obtener los clientes existentes\n          const response = await fetch('http://localhost:3000/clientes');\n          if (!response.ok) {\n            throw new Error('Error al obtener los clientes: ' + response.statusText);\n          }\n\n          const clientesExistentes = await response.json();\n\n          // Verificar si el DNI ya está registrado\n          const clienteExistente = clientesExistentes.find(cliente => cliente.dni === this.cliente.dni);\n\n          if (clienteExistente) {\n            // Si el DNI ya existe, mostrar un mensaje de error\n            this.mostrarAlerta('Error', 'El DNI ya está registrado.', 'error');\n          } else {\n            // Si el DNI no existe, agregar el cliente a la base de datos\n            const crearResponse = await fetch('http://localhost:3000/clientes', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(this.cliente)\n            });\n\n            if (!crearResponse.ok) {\n              throw new Error('Error al guardar el cliente: ' + crearResponse.statusText);\n            }\n\n            const nuevoCliente = await crearResponse.json();\n            this.clientes.push(nuevoCliente); // Agregar cliente al array local\n            this.mostrarAlerta('Aviso', 'Cliente Grabado', 'success');\n            this.getClientes();\n          }\n        } catch (error) {\n          console.error(error);\n          this.mostrarAlerta('Error', 'No se pudo grabar el cliente.', 'error');\n        }\n      } else {\n        this.mostrarAlerta('Error', 'Por favor, completa todos los campos requeridos.', 'error');\n      }\n    },\n    async eliminarcliente() {\n      // Verificar si los campos requeridos están llenos\n      if (this.cliente.dni && this.cliente.apellidos) {\n        try {\n          this.cliente.baja = ''\n          // Obtener los clientes existentes\n          const response = await fetch('http://localhost:3000/clientes');\n          if (!response.ok) {\n            throw new Error('Error al obtener los clientes: ' + response.statusText);\n          }\n\n          const clientesExistentes = await response.json();\n\n          // Verificar si el DNI ya está registrado\n          const clienteExistente = clientesExistentes.find(cliente => cliente.dni === this.cliente.dni);\n\n          if (clienteExistente) {\n            const fechaHoy = this.obtenerFechaHoy();\n            cliente\n            // Si el DNI ya existe, mostrar un mensaje de error\n            this.mostrarAlerta('Error', 'El DNI ya está registrado.', 'error');\n          } else {\n            // Si el DNI no existe, agregar el cliente a la base de datos\n            const crearResponse = await fetch('http://localhost:3000/clientes', {\n              method: 'POST',\n              headers: {\n                'Content-Type': 'application/json'\n              },\n              body: JSON.stringify(this.cliente)\n            });\n\n            if (!crearResponse.ok) {\n              throw new Error('Error al guardar el cliente: ' + crearResponse.statusText);\n            }\n\n            const nuevoCliente = await crearResponse.json();\n            this.clientes.push(nuevoCliente); // Agregar cliente al array local\n            this.mostrarAlerta('Aviso', 'Cliente Grabado', 'success');\n            this.getClientes();\n          }\n        } catch (error) {\n          console.error(error);\n          this.mostrarAlerta('Error', 'No se pudo grabar el cliente.', 'error');\n        }\n      } else {\n        this.mostrarAlerta('Error', 'Por favor, completa todos los campos requeridos.', 'error');\n      }\n    },\n  },\n}\n\n</script>\n\n<style scoped>\n.custom-date-input {\n  width: 12em;\n  text-align: center;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}